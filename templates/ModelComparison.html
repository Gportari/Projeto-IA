<!DOCTYPE html>
<html lang="pt-br" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparação de Modelos - Projeto IA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <link rel="stylesheet" href="/static/style-models.css">
    <link rel="stylesheet" href="/static/theme.css">
</head>
<body class="bg-gray-100 dark:bg-[#121e2d] text-gray-800 dark:text-[#e3e8f0]">
    <div class="flex h-screen">
        <!-- Sidebar reutilizável -->
        <div id="sidebar"></div>

        <!-- Conteúdo Principal -->
        <main class="flex-1 overflow-y-auto p-6">
            <div class="mb-6">
                <h1 class="text-2xl font-bold mb-4">Comparação de Modelos</h1>
                <p class="mb-4">Selecione dois modelos para comparar seu desempenho no conjunto de dados fornecido.</p>
            </div>

            <!-- Seleção de Modelos -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <!-- Modelo 1 -->
                <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md card">
                    <h2 class="text-xl font-semibold mb-4">Modelo 1</h2>
                    <div class="mb-4">
                        <label for="model1-type" class="block mb-2">Tipo de Modelo:</label>
                        <select id="model1-type" class="w-full p-2 border rounded dark:bg-[#2a3746] dark:border-[#3a4756]">
                            <option value="logistic">Regressão Logística</option>
                            <option value="knn">KNN</option>
                            <option value="svm">SVM</option>
                            <option value="tree">Decision Tree</option>
                            <option value="rf">Random Forest</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label for="model1-config" class="block mb-2">Configuração:</label>
                        <select id="model1-config" class="w-full p-2 border rounded dark:bg-[#2a3746] dark:border-[#3a4756]">
                            <option value="">Selecione uma configuração</option>
                        </select>
                    </div>
                </div>

                <!-- Modelo 2 -->
                <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md card">
                    <h2 class="text-xl font-semibold mb-4">Modelo 2</h2>
                    <div class="mb-4">
                        <label for="model2-type" class="block mb-2">Tipo de Modelo:</label>
                        <select id="model2-type" class="w-full p-2 border rounded dark:bg-[#2a3746] dark:border-[#3a4756]">
                            <option value="logistic">Regressão Logística</option>
                            <option value="knn">KNN</option>
                            <option value="svm">SVM</option>
                            <option value="tree">Decision Tree</option>
                            <option value="rf">Random Forest</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label for="model2-config" class="block mb-2">Configuração:</label>
                        <select id="model2-config" class="w-full p-2 border rounded dark:bg-[#2a3746] dark:border-[#3a4756]">
                            <option value="">Selecione uma configuração</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Parâmetros de Treinamento -->
            <!-- Seleção de Dataset -->
            <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md mb-8 card">
                <h2 class="text-xl font-semibold mb-2">Dataset para Treino</h2>
                <p class="text-sm mb-4 text-gray-600 dark:text-[#92adc9]">Selecione um arquivo enviado na página Dataset. Este dataset será usado para treinar os modelos.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
                    <div>
                        <label for="dataset-select" class="block mb-2">Arquivo Excel (XLSX ou CSV):</label>
                        <select id="dataset-select" class="w-full p-2 border rounded dark:bg-[#2a3746] dark:border-[#3a4756]">
                            <option value="">Selecione um dataset</option>
                        </select>
                    </div>
                    <div class="md:col-span-2 flex items-center gap-3">
                        <a href="/Dataset.html" target="_blank" class="inline-flex items-center justify-center px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 dark:bg-[#2a3746] dark:hover:bg-[#3a4756]">Gerenciar Datasets</a>
                        <span class="text-xs text-gray-500 dark:text-[#92adc9]">Abra em outra aba para enviar/renomear datasets.</span>
                    </div>
                </div>
            </div>

            <!-- Parâmetros de Treinamento -->
            <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md mb-8 card">
                <h2 class="text-xl font-semibold mb-4">Parâmetros de Treinamento</h2>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div>
                        <label for="epochs" class="block mb-2">Épocas:</label>
                        <input type="number" id="epochs" value="100" min="1" max="1000" class="w-full p-2 border rounded dark:bg-[#2a3746] dark:border-[#3a4756]">
                    </div>
                    <div>
                        <label for="learning-rate" class="block mb-2">Taxa de Aprendizado:</label>
                        <input type="number" id="learning-rate" value="0.01" min="0.001" max="1" step="0.001" class="w-full p-2 border rounded dark:bg-[#2a3746] dark:border-[#3a4756]">
                    </div>
                    <div>
                        <label for="test-split" class="block mb-2">Divisão de Teste (%):</label>
                        <input type="number" id="test-split" value="20" min="10" max="50" class="w-full p-2 border rounded dark:bg-[#2a3746] dark:border-[#3a4756]">
                    </div>
                    <div>
                        <label for="train-mode" class="block mb-2">Modo de Treinamento:</label>
                        <select id="train-mode" class="w-full p-2 border rounded dark:bg-[#2a3746] dark:border-[#3a4756]">
                            <option value="both">Treinar Ambos</option>
                            <option value="only-model1">Apenas Modelo 1</option>
                            <option value="only-model2">Apenas Modelo 2</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Botão de Treinamento -->
            <div class="flex justify-center mb-8">
                <button id="train-button" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-6 rounded-lg font-semibold">
                    Treinar e Comparar Modelos
                </button>
            </div>

            <!-- Progresso de Treinamento -->
            <div id="progress-section" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 hidden">
                <!-- Progresso Modelo 1 -->
                <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md card">
                    <h3 class="text-lg font-semibold mb-4">Progresso - Modelo 1</h3>
                    <div class="mb-2 flex justify-between text-sm">
                        <span>Época: <span id="m1-epoch">0</span>/<span id="m1-total">0</span></span>
                        <span>ETA: <span id="m1-eta">--</span></span>
                    </div>
                    <div class="w-full bg-gray-200 dark:bg-[#2a3746] rounded-full h-2 mb-3">
                        <div id="m1-progress" class="bg-blue-500 h-2 rounded-full" style="width:0%"></div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <p class="font-medium">Loss</p>
                            <p id="m1-loss" class="text-xl font-bold">--</p>
                        </div>
                        <div>
                            <p class="font-medium">Accuracy</p>
                            <p id="m1-acc" class="text-xl font-bold">--</p>
                        </div>
                    </div>
                    <div class="mt-4">
                        <button id="cancel-model1" class="bg-red-500 hover:bg-red-600 text-white py-1 px-3 rounded">Cancelar Modelo 1</button>
                    </div>
                </div>
                <!-- Progresso Modelo 2 -->
                <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md card">
                    <h3 class="text-lg font-semibold mb-4">Progresso - Modelo 2</h3>
                    <div class="mb-2 flex justify-between text-sm">
                        <span>Época: <span id="m2-epoch">0</span>/<span id="m2-total">0</span></span>
                        <span>ETA: <span id="m2-eta">--</span></span>
                    </div>
                    <div class="w-full bg-gray-200 dark:bg-[#2a3746] rounded-full h-2 mb-3">
                        <div id="m2-progress" class="bg-green-500 h-2 rounded-full" style="width:0%"></div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <p class="font-medium">Loss</p>
                            <p id="m2-loss" class="text-xl font-bold">--</p>
                        </div>
                        <div>
                            <p class="font-medium">Accuracy</p>
                            <p id="m2-acc" class="text-xl font-bold">--</p>
                        </div>
                    </div>
                    <div class="mt-4">
                        <button id="cancel-model2" class="bg-red-500 hover:bg-red-600 text-white py-1 px-3 rounded">Cancelar Modelo 2</button>
                    </div>
                </div>
            </div>

            <!-- Área de Resultados -->
            <div id="results-container" class="hidden">
                <h2 class="text-xl font-semibold mb-4">Resultados da Comparação</h2>
                
                <!-- Métricas de Comparação -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <!-- Métricas do Modelo 1 -->
                    <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md">
                        <h3 id="model1-name" class="text-lg font-semibold mb-4">Modelo 1</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <p class="font-medium">Acurácia:</p>
                                <p id="model1-accuracy" class="text-2xl font-bold">-</p>
                            </div>
                            <div>
                                <p class="font-medium">Precisão:</p>
                                <p id="model1-precision" class="text-2xl font-bold">-</p>
                            </div>
                            <div>
                                <p class="font-medium">Recall:</p>
                                <p id="model1-recall" class="text-2xl font-bold">-</p>
                            </div>
                            <div>
                                <p class="font-medium">F1-Score:</p>
                                <p id="model1-f1" class="text-2xl font-bold">-</p>
                            </div>
                        </div>
                    </div>

                    <!-- Métricas do Modelo 2 -->
                    <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md">
                        <h3 id="model2-name" class="text-lg font-semibold mb-4">Modelo 2</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <p class="font-medium">Acurácia:</p>
                                <p id="model2-accuracy" class="text-2xl font-bold">-</p>
                            </div>
                            <div>
                                <p class="font-medium">Precisão:</p>
                                <p id="model2-precision" class="text-2xl font-bold">-</p>
                            </div>
                            <div>
                                <p class="font-medium">Recall:</p>
                                <p id="model2-recall" class="text-2xl font-bold">-</p>
                            </div>
                            <div>
                                <p class="font-medium">F1-Score:</p>
                                <p id="model2-f1" class="text-2xl font-bold">-</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gráfico de Comparação -->
                <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md mb-8">
                    <h3 class="text-lg font-semibold mb-4">Comparação de Métricas</h3>
                    <div id="comparison-chart" class="h-64">
                        <!-- Canvas para o gráfico será inserido via JavaScript -->
                    </div>
                </div>

                <!-- Matrizes de Confusão -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4">Matriz de Confusão — Modelo 1</h3>
                        <table class="w-full text-center text-sm">
                            <thead>
                                <tr>
                                    <th></th><th>Prev -1</th><th>Prev 1</th>
                                </tr>
                            </thead>
                            <tbody id="cm1">
                                <tr><td>Real -1</td><td>--</td><td>--</td></tr>
                                <tr><td>Real 1</td><td>--</td><td>--</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4">Matriz de Confusão — Modelo 2</h3>
                        <table class="w-full text-center text-sm">
                            <thead>
                                <tr>
                                    <th></th><th>Prev -1</th><th>Prev 1</th>
                                </tr>
                            </thead>
                            <tbody id="cm2">
                                <tr><td>Real -1</td><td>--</td><td>--</td></tr>
                                <tr><td>Real 1</td><td>--</td><td>--</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Curvas de Treinamento -->
                <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md mb-8">
                    <h3 class="text-lg font-semibold mb-4">Curvas de Treinamento</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <canvas id="loss-chart" height="200"></canvas>
                        </div>
                        <div>
                            <canvas id="acc-chart" height="200"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Teste e Predição -->
                <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md mb-8">
                    <h3 class="text-lg font-semibold mb-4">Testar Modelos</h3>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                        <div>
                            <label for="test-x1" class="block mb-1">x₁</label>
                            <input id="test-x1" type="number" step="any" class="w-full p-2 border rounded dark:bg-[#2a3746] dark:border-[#3a4756]">
                        </div>
                        <div>
                            <label for="test-x2" class="block mb-1">x₂</label>
                            <input id="test-x2" type="number" step="any" class="w-full p-2 border rounded dark:bg-[#2a3746] dark:border-[#3a4756]">
                        </div>
                        <div>
                            <label for="test-x3" class="block mb-1">x₃</label>
                            <input id="test-x3" type="number" step="any" class="w-full p-2 border rounded dark:bg-[#2a3746] dark:border-[#3a4756]">
                        </div>
                        <div>
                            <label for="test-label" class="block mb-1">d (opcional)</label>
                            <input id="test-label" type="number" step="any" class="w-full p-2 border rounded dark:bg-[#2a3746] dark:border-[#3a4756]" placeholder="-1 ou 1">
                        </div>
                    </div>
                    <div class="flex gap-4 mb-4">
                        <button id="test-model1" class="bg-gray-700 hover:bg-gray-800 text-white py-2 px-4 rounded">Testar Modelo 1</button>
                        <button id="test-model2" class="bg-gray-700 hover:bg-gray-800 text-white py-2 px-4 rounded">Testar Modelo 2</button>
                    </div>
                    <div id="test-results" class="text-sm">
                        <p class="font-medium">Predição:</p>
                        <p id="prediction-output" class="text-xl font-bold">--</p>
                        <div id="test-metrics" class="grid grid-cols-3 gap-4 mt-4 hidden">
                            <div>
                                <p class="font-medium">Acurácia</p>
                                <p id="test-accuracy" class="text-lg font-bold">--</p>
                            </div>
                            <div>
                                <p class="font-medium">Precisão</p>
                                <p id="test-precision" class="text-lg font-bold">--</p>
                            </div>
                            <div>
                                <p class="font-medium">Recall</p>
                                <p id="test-recall" class="text-lg font-bold">--</p>
                            </div>
                        </div>
                        <div id="test-confusion" class="mt-4 hidden">
                            <p class="font-medium">Matriz de Confusão (Teste):</p>
                            <table class="text-sm">
                                <tbody id="test-cm">
                                    <tr><td></td><td>Prev -1</td><td>Prev 1</td></tr>
                                    <tr><td>Real -1</td><td>--</td><td>--</td></tr>
                                    <tr><td>Real 1</td><td>--</td><td>--</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <div id="test-proba" class="mt-4 hidden">
                            <p class="font-medium">Probabilidades (y=1):</p>
                            <p id="test-proba-output" class="text-lg font-bold">--</p>
                        </div>
                    </div>
                </div>

                <!-- Exportar e Histórico -->
                <div class="bg-white dark:bg-[#1f2d3a] p-6 rounded-lg shadow-md mb-8">
                    <h3 class="text-lg font-semibold mb-4">Resultados e Histórico</h3>
                    <div class="flex gap-4 mb-4">
                        <button id="export-results" class="bg-indigo-500 hover:bg-indigo-600 text-white py-2 px-4 rounded">Exportar Resultados</button>
                        <button id="clear-history" class="bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded">Limpar Histórico</button>
                    </div>
                    <div>
                        <ul id="history-list" class="list-disc pl-5 text-sm"></ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Dataset (hidden) -->
    <div id="dataset" class="hidden">
        <table>
            <thead>
                <tr>
                    <th>Amostra</th>
                    <th>x₁</th>
                    <th>x₂</th>
                    <th>x₃</th>
                    <th>d</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>01</td><td>-0.6508</td><td>0.1097</td><td>4.0009</td><td>-1.0000</td></tr>
                <tr><td>02</td><td>-1.4492</td><td>0.8896</td><td>4.4005</td><td>-1.0000</td></tr>
                <tr><td>03</td><td>2.0850</td><td>0.6876</td><td>12.0710</td><td>-1.0000</td></tr>
                <tr><td>04</td><td>0.2626</td><td>1.1476</td><td>7.7985</td><td>1.0000</td></tr>
                <tr><td>05</td><td>0.6418</td><td>1.0234</td><td>7.0427</td><td>1.0000</td></tr>
                <tr><td>06</td><td>0.2569</td><td>0.6730</td><td>8.3265</td><td>-1.0000</td></tr>
                <tr><td>07</td><td>1.1155</td><td>0.6043</td><td>7.4446</td><td>-1.0000</td></tr>
                <tr><td>08</td><td>0.0914</td><td>0.3399</td><td>7.0677</td><td>-1.0000</td></tr>
                <tr><td>09</td><td>0.0121</td><td>0.5256</td><td>4.6316</td><td>1.0000</td></tr>
                <tr><td>10</td><td>-0.0429</td><td>0.4660</td><td>4.5323</td><td>1.0000</td></tr>
                <tr><td>11</td><td>0.4340</td><td>0.6870</td><td>8.2287</td><td>-1.0000</td></tr>
                <tr><td>12</td><td>0.2735</td><td>1.0287</td><td>7.1934</td><td>1.0000</td></tr>
                <tr><td>13</td><td>0.4839</td><td>0.4851</td><td>7.4850</td><td>-1.0000</td></tr>
                <tr><td>14</td><td>0.4089</td><td>-0.1267</td><td>5.5019</td><td>-1.0000</td></tr>
                <tr><td>15</td><td>1.4391</td><td>0.1614</td><td>8.5843</td><td>-1.0000</td></tr>
                <tr><td>16</td><td>-0.9115</td><td>-0.1973</td><td>2.1962</td><td>-1.0000</td></tr>
                <tr><td>17</td><td>0.3654</td><td>1.0475</td><td>7.4858</td><td>1.0000</td></tr>
                <tr><td>18</td><td>-0.2144</td><td>0.7515</td><td>7.1699</td><td>1.0000</td></tr>
                <tr><td>19</td><td>0.2013</td><td>1.0014</td><td>6.5489</td><td>1.0000</td></tr>
                <tr><td>20</td><td>0.6483</td><td>0.2183</td><td>5.8991</td><td>1.0000</td></tr>
                <tr><td>21</td><td>-0.1147</td><td>0.2242</td><td>7.2435</td><td>-1.0000</td></tr>
                <tr><td>22</td><td>-0.7970</td><td>0.8795</td><td>8.3762</td><td>-1.0000</td></tr>
                <tr><td>23</td><td>-1.0625</td><td>0.6366</td><td>2.4707</td><td>1.0000</td></tr>
                <tr><td>24</td><td>0.5307</td><td>0.1285</td><td>5.6883</td><td>1.0000</td></tr>
                <tr><td>25</td><td>-1.2200</td><td>0.7777</td><td>1.7252</td><td>1.0000</td></tr>
                <tr><td>26</td><td>0.3957</td><td>0.1076</td><td>5.6623</td><td>-1.0000</td></tr>
                <tr><td>27</td><td>-0.1013</td><td>0.5989</td><td>7.1812</td><td>-1.0000</td></tr>
                <tr><td>28</td><td>2.4482</td><td>0.9455</td><td>11.2095</td><td>1.0000</td></tr>
                <tr><td>29</td><td>2.0149</td><td>0.6912</td><td>10.9263</td><td>-1.0000</td></tr>
                <tr><td>30</td><td>0.2012</td><td>0.2611</td><td>5.4631</td><td>1.0000</td></tr>
            </tbody>
        </table>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/vue@3"></script>
    <script src="/static/components/sidebar-nav.js"></script>
    <script>initSidebarNav();</script>
    <script src="/static/model_comparison.js"></script>
</body>
</html>